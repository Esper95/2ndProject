<html><head>    
  
	<link rel="stylesheet" type="text/css" href="bubble.css">
    <style type="text/css">
	
	#mainBubble {
	  background: #fff;
	  border: solid 1px #ddd;
	  box-shadow: 0 0 4px rgba(0,0,0,0);
	  font: 10px sans-serif;
	  height: 300px;
	  position: relative;
	  width: 95%;
	}
			
	#mainBubble svg {
	  left: 0;
	  position: absolute;
	  top: 0;
	}
						
	#mainBubble circle.topBubble {
	  fill: #aaa;
	  stroke: #666;
	  stroke-width: 1.5px;
	 }
    </style>

  <script async="" src="//www.google-analytics.com/analytics.js"></script><script type="text/javascript" src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script type="text/javascript" src="http://sunsp.net/script/ga_sunsp.js"></script>    
  <script src="/2ndProject/2ndProject/WebContent/graph/2번째.json"></script>
    <title>
      Bubble Menu
    </title>
  </head>

  <body>



<div id="page">
     <div id="mainBubble" style="height: 299px;">
    <svg class="mainBubbleSVG" width="596.904" height="299"><text id="bubbleItemNote" x="10" y="284" font-size="12" dominant-baseline="middle" alignment-baseline="middle" style="fill: rgb(136, 136, 136);">Developed by Shipeng Sun (sunsp.gis@gmail.com), Institute on the Environment, University of Minnesota, now at University of Illinois Springfield</text><g id="topBubbleAndText_0"><circle class="topBubble" id="topBubble0" r="45.91569230769231" cx="91.83138461538462" cy="114.97189743589745" style="fill: rgb(31, 119, 180); opacity: 0.3;"></circle><text class="topBubbleText" x="91.83138461538462" y="114.97189743589745" font-size="30" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" style="fill: rgb(31, 119, 180);">Atlas</text></g><g id="topBubbleAndText_1"><circle class="topBubble" id="topBubble1" r="45.91569230769231" cx="229.57846153846157" cy="114.97189743589745" style="fill: rgb(255, 127, 14); opacity: 0.3;"></circle><text class="topBubbleText" x="229.57846153846157" y="114.97189743589745" font-size="30" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" style="fill: rgb(255, 127, 14);">AgLab</text></g><g id="topBubbleAndText_2"><circle class="topBubble" id="topBubble2" r="45.91569230769231" cx="367.3255384615385" cy="114.97189743589745" style="fill: rgb(44, 160, 44); opacity: 0.3;"></circle><text class="topBubbleText" x="367.3255384615385" y="114.97189743589745" font-size="30" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" style="fill: rgb(44, 160, 44);">Nutshell</text></g><g id="topBubbleAndText_3"><circle class="topBubble" id="topBubble3" r="45.91569230769231" cx="505.0726153846154" cy="114.97189743589745" style="fill: rgb(214, 39, 40); opacity: 0.3;"></circle><text class="topBubbleText" x="505.0726153846154" y="114.97189743589745" font-size="30" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" style="fill: rgb(214, 39, 40);">Data</text></g><g><circle class="childBubble0" id="childBubble_0sub_0" r="15.30523076923077" cx="140.53233070585097" cy="66.27095134543111" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://sunsp.net/portfolio.html</title></circle><text class="childBubbleText0" x="140.53233070585097" y="66.27095134543111" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(31, 119, 180);">Geography</text></g><g><circle class="childBubble0" id="childBubble_0sub_1" r="15.30523076923077" cx="160.70492307692308" cy="114.97189743589745" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://sunsp.net/portfolio.html</title></circle><text class="childBubbleText0" x="160.70492307692308" y="114.97189743589745" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(31, 119, 180);">Crop Land</text></g><g><circle class="childBubble0" id="childBubble_0sub_2" r="15.30523076923077" cx="140.53233070585097" cy="163.67284352636378" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://sunsp.net/portfolio.html</title></circle><text class="childBubbleText0" x="140.53233070585097" y="163.67284352636378" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(31, 119, 180);">Crop Yields</text></g><g><circle class="childBubble1" id="childBubble_1sub_0" r="15.30523076923077" cx="278.2794076289279" cy="66.27095134543111" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://d3js.org</title></circle><text class="childBubbleText1" x="278.2794076289279" y="66.27095134543111" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(255, 127, 14);">Excess Nutrient</text></g><g><circle class="childBubble1" id="childBubble_1sub_1" r="15.30523076923077" cx="298.452" cy="114.97189743589745" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://uis.edu/ens</title></circle><text class="childBubbleText1" x="298.452" y="114.97189743589745" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(255, 127, 14);">Yield Gap</text></g><g><circle class="childBubble1" id="childBubble_1sub_2" r="15.30523076923077" cx="278.2794076289279" cy="163.67284352636378" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://gli.environment.umn.edu</title></circle><text class="childBubbleText1" x="278.2794076289279" y="163.67284352636378" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(255, 127, 14);">Fertilizer</text></g><g><circle class="childBubble2" id="childBubble_2sub_0" r="15.30523076923077" cx="416.02648455200483" cy="66.27095134543111" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://d3js.org</title></circle><text class="childBubbleText2" x="416.02648455200483" y="66.27095134543111" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(44, 160, 44);">Efficiency</text></g><g><circle class="childBubble2" id="childBubble_2sub_1" r="15.30523076923077" cx="436.199076923077" cy="114.97189743589745" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://uis.edu/ens</title></circle><text class="childBubbleText2" x="436.199076923077" y="114.97189743589745" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(44, 160, 44);">Excess Nutrient</text></g><g><circle class="childBubble2" id="childBubble_2sub_2" r="15.30523076923077" cx="416.02648455200483" cy="163.67284352636378" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://environment.umn.edu</title></circle><text class="childBubbleText2" x="416.02648455200483" y="163.67284352636378" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(44, 160, 44);">Economy</text></g><g><circle class="childBubble2" id="childBubble_2sub_3" r="15.30523076923077" cx="367.3255384615385" cy="183.8454358974359" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://uis.edu/ens</title></circle><text class="childBubbleText2" x="367.3255384615385" y="183.8454358974359" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(44, 160, 44);">Agriculture</text></g><g><circle class="childBubble3" id="childBubble_3sub_0" r="15.30523076923077" cx="553.7735614750818" cy="66.27095134543111" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://www.earthstat.org/</title></circle><text class="childBubbleText3" x="553.7735614750818" y="66.27095134543111" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(214, 39, 40);">Geography</text></g><g><circle class="childBubble3" id="childBubble_3sub_1" r="15.30523076923077" cx="573.9461538461538" cy="114.97189743589745" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://www.earthstat.org/</title></circle><text class="childBubbleText3" x="573.9461538461538" y="114.97189743589745" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(214, 39, 40);">Crop Land</text></g><g><circle class="childBubble3" id="childBubble_3sub_2" r="15.30523076923077" cx="553.7735614750818" cy="163.67284352636378" cursor="pointer" style="opacity: 0.5; fill: rgb(238, 238, 238);"><title>http://www.earthstat.org/</title></circle><text class="childBubbleText3" x="553.7735614750818" y="163.67284352636378" text-anchor="middle" font-size="6" cursor="pointer" dominant-baseline="middle" alignment-baseline="middle" style="opacity: 0.5; fill: rgb(214, 39, 40);">Crop Yields</text></g></svg></div>
<div id="content">
	<p class="bibliquote"><span class="attribution">
		<a href="http://sunsp.net/code/bubbleMenu.html" target="_blank">Source Code</a>
		<a href="http://sunsp.net/code/main_bubble_json.html" target="_blank">JSON File</a>
	</span> </p>
	<p class="bibliquote"><span class="attribution">By  
		<a href="http://sunsp.net/" target="_blank"> Shipeng Sun</a>, currently at 
	</span> </p>
		
	</div></div>

  
  
  <script>
   var w = window.innerWidth*0.68*0.95;
   var h = Math.ceil(w*0.5);
   var oR = 0;
   var nTop = 0;
   
   var svgContainer = d3.select("#mainBubble")
      .style("height", h+"px");
   
   var svg = d3.select("#mainBubble").append("svg")
		.attr("class", "mainBubbleSVG")
   		.attr("width", w)
   		.attr("height",h)
		.on("mouseleave", function() {return resetBubbles();});
		
  var mainNote = svg.append("text")
	.attr("id", "bubbleItemNote")
	.attr("x", 10)
	.attr("y", w/2-15)
	.attr("font-size", 12)
	.attr("dominant-baseline", "middle")
	.attr("alignment-baseline", "middle")
	.style("fill", "#888888")
	.text(function(d) {return "Developed by Shipeng Sun (sunsp.gis@gmail.com), Institute on the Environment, University of Minnesota, now at University of Illinois Springfield";});	


    d3.json("main_bubble.json", function(error, root) {
    	console.log(error);
	
    	var bubbleObj = svg.selectAll(".topBubble")
      			.data(root.children)
      		.enter().append("g")
      			.attr("id", function(d,i) {return "topBubbleAndText_" + i});
      		
      	console.log(root);	
      	nTop = root.children.length;
      	oR = w/(1+3*nTop);	

		h = Math.ceil(w/nTop*2);
		svgContainer.style("height",h+"px");
      	
      	var colVals = d3.scale.category10();
   		
    	bubbleObj.append("circle")
      		.attr("class", "topBubble")
      		.attr("id", function(d,i) {return "topBubble" + i;})
      		.attr("r", function(d) { return oR; })
      		.attr("cx", function(d, i) {return oR*(3*(1+i)-1);})
      		.attr("cy", (h+oR)/3)
      		.style("fill", function(d,i) { return colVals(i); }) // #1f77b4
			.style("opacity",0.3)
      		.on("mouseover", function(d,i) {return activateBubble(d,i);});
		
      		
    	bubbleObj.append("text")
      		.attr("class", "topBubbleText")
      		.attr("x", function(d, i) {return oR*(3*(1+i)-1);})
      		.attr("y", (h+oR)/3)
			.style("fill", function(d,i) { return colVals(i); }) // #1f77b4
      		.attr("font-size", 30)
      		.attr("text-anchor", "middle")
			.attr("dominant-baseline", "middle")
			.attr("alignment-baseline", "middle")
      		.text(function(d) {return d.name})    	
      		.on("mouseover", function(d,i) {return activateBubble(d,i);});
      	
      	
      	for(var iB = 0; iB < nTop; iB++)
      	{
      		var childBubbles = svg.selectAll(".childBubble" + iB)
      			.data(root.children[iB].children)
      			.enter().append("g");
      			
		//var nSubBubble = Math.floor(root.children[iB].children.length/2.0);	
			
      		childBubbles.append("circle")
      			.attr("class", "childBubble" + iB)
      			.attr("id", function(d,i) {return "childBubble_" + iB + "sub_" + i;})
      			.attr("r",  function(d) {return oR/3.0;})
      			.attr("cx", function(d,i) {return (oR*(3*(iB+1)-1) + oR*1.5*Math.cos((i-1)*45/180*Math.PI));})
      			.attr("cy", function(d,i) {return ((h+oR)/3 +        oR*1.5*Math.sin((i-1)*45/180*Math.PI));})
      			.attr("cursor","pointer")
      			.style("opacity",0.5)
      			.style("fill", "#eee")
      			.on("click", function(d,i) {
			    window.open(d.address);      			
			  })
			.on("mouseover", function(d,i) {
			  //window.alert("say something");
			  var noteText = "";
			  if (d.note == null || d.note == "") {
			    noteText = d.address;
			  } else {
			    noteText = d.note;
			  }
			  d3.select("#bubbleItemNote").text(noteText);
			  })
			.append("svg:title")
			.text(function(d) { return d.address; });	

      		childBubbles.append("text")
      			.attr("class", "childBubbleText" + iB)
      			.attr("x", function(d,i) {return (oR*(3*(iB+1)-1) + oR*1.5*Math.cos((i-1)*45/180*Math.PI));})
      			.attr("y", function(d,i) {return ((h+oR)/3 +        oR*1.5*Math.sin((i-1)*45/180*Math.PI));})
      			.style("opacity",0.5)
	      		.attr("text-anchor", "middle")
   		   	.style("fill", function(d,i) { return colVals(iB); }) // #1f77b4
      			.attr("font-size", 6)
      			.attr("cursor","pointer")
      			.attr("dominant-baseline", "middle")
			.attr("alignment-baseline", "middle")
       			.text(function(d) {return d.name})    	
      			.on("click", function(d,i) {
			    window.open(d.address);
      			});	

     	}

 		
      	});	

    resetBubbles = function () {
	  w = window.innerWidth*0.68*0.95;
	  oR = w/(1+3*nTop);
	  
	  h = Math.ceil(w/nTop*2);
	  svgContainer.style("height",h+"px");

	  mainNote.attr("y",h-15);
	      
	  svg.attr("width", w);
	  svg.attr("height",h);	      
      
	  d3.select("#bubbleItemNote").text("Developed by Shipeng Sun (sunsp.gis@gmail.com), Institute on the Environment, University of Minnesota, now at University of Illinois Springfield");
      
	  var t = svg.transition()
		  .duration(650);
		
	    t.selectAll(".topBubble")
     		.attr("r", function(d) { return oR; })
      		.attr("cx", function(d, i) {return oR*(3*(1+i)-1);})
      		.attr("cy", (h+oR)/3);

	    t.selectAll(".topBubbleText")
		.attr("font-size", 30)
      		.attr("x", function(d, i) {return oR*(3*(1+i)-1);})
      		.attr("y", (h+oR)/3);
    
	  for(var k = 0; k < nTop; k++) 
	  {
	    t.selectAll(".childBubbleText" + k)
       			.attr("x", function(d,i) {return (oR*(3*(k+1)-1) + oR*1.5*Math.cos((i-1)*45/180*Math.PI));})
      			.attr("y", function(d,i) {return ((h+oR)/3 +        oR*1.5*Math.sin((i-1)*45/180*Math.PI));})
			.attr("font-size", 6)
      			.style("opacity",0.5);

	    t.selectAll(".childBubble" + k)
      			.attr("r",  function(d) {return oR/3.0;})
			.style("opacity",0.5)
      			.attr("cx", function(d,i) {return (oR*(3*(k+1)-1) + oR*1.5*Math.cos((i-1)*45/180*Math.PI));})
      			.attr("cy", function(d,i) {return ((h+oR)/3 +        oR*1.5*Math.sin((i-1)*45/180*Math.PI));});
					
	  }	  
	}
      	
      	
      	function activateBubble(d,i) {
      		// increase this bubble and decrease others
			var t = svg.transition()
			    .duration(d3.event.altKey ? 7500 : 350);
	
	  		t.selectAll(".topBubble")
	  			.attr("cx", function(d,ii){
					if(i == ii) {
						// Nothing to change
						return oR*(3*(1+ii)-1) - 0.6*oR*(ii-1);
					} else {
						// Push away a little bit
						if(ii < i){
							// left side
							return oR*0.6*(3*(1+ii)-1);
						} else {
							// right side
							return oR*(nTop*3+1) - oR*0.6*(3*(nTop-ii)-1);
						}
					}	  			
	  			})
	      		.attr("r", function(d, ii) { 
	      			if(i == ii)
	      				return oR*1.8;
	      			else
	      				return oR*0.8;
	      			});
	      			
	      	t.selectAll(".topBubbleText")
	  			.attr("x", function(d,ii){
					if(i == ii) {
						// Nothing to change
						return oR*(3*(1+ii)-1) - 0.6*oR*(ii-1);
					} else {
						// Push away a little bit
						if(ii < i){
							// left side
							return oR*0.6*(3*(1+ii)-1);
						} else {
							// right side
							return oR*(nTop*3+1) - oR*0.6*(3*(nTop-ii)-1);
						}
					}	  			
	  			})	      	
	      		.attr("font-size", function(d,ii){
					if(i == ii)
						return 30*1.5;
					else
						return 30*0.6;	      		
	      		});
	
			var signSide = -1;
			for(var k = 0; k < nTop; k++) 
			{
				signSide = 1;
				if(k < nTop/2) signSide = 1;
				t.selectAll(".childBubbleText" + k)
	      			.attr("x", function(d,i) {return (oR*(3*(k+1)-1) - 0.6*oR*(k-1) + signSide*oR*2.5*Math.cos((i-1)*45/180*Math.PI));})
   		   			.attr("y", function(d,i) {return ((h+oR)/3 + signSide*oR*2.5*Math.sin((i-1)*45/180*Math.PI));})
      				.attr("font-size", function(){
      						return (k==i)?12:6;
      					})
					.style("opacity",function(){
							return (k==i)?1:0;
						});
					
				t.selectAll(".childBubble" + k)
	      			.attr("cx", function(d,i) {return (oR*(3*(k+1)-1) - 0.6*oR*(k-1) + signSide*oR*2.5*Math.cos((i-1)*45/180*Math.PI));})
   		   			.attr("cy", function(d,i) {return ((h+oR)/3 + signSide*oR*2.5*Math.sin((i-1)*45/180*Math.PI));})
					.attr("r", function(){
							return (k==i)?(oR*0.55):(oR/3.0);				
					})
					.style("opacity", function(){
							return (k==i)?1:0;					
						});	
			}	        		
      	}
	
	window.onresize = resetBubbles;
</script>


<div id="mainfooter">
<div style="display:none">
<a href="http://www3.clustrmaps.com/counter/maps.php?url=http://sunsp.net" id="clustrMapsLink"><img src="http://www3.clustrmaps.com/counter/index2.php?url=http://sunsp.net" style="border:0px;" alt="Locations of visitors to this page" title="Locations of visitors to this page" id="clustrMapsImg">
</a>
<script type="text/javascript">
function cantload() {
img = document.getElementById("clustrMapsImg");
img.onerror = null;
img.src = "http://www2.clustrmaps.com/images/clustrmaps-back-soon.jpg";
document.getElementById("clustrMapsLink").href = "http://www2.clustrmaps.com";
}
img = document.getElementById("clustrMapsImg");
img.onerror = cantload;
</script>
<p>
<a href="http://m.maploco.com/details/f9752o9c"><img style="border:0px;" src="http://www.maploco.com/vmap/s/8522832.png" alt="Locations of Site Visitors" title="Locations of Site Visitors"></a>
</p>
<p>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=9563557; 
var sc_invisible=0; 
var sc_security="4a72786c"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script><script type="text/javascript" src="http://www.statcounter.com/counter/counter.js"></script><span class="statcounter"><a id="sc_counter_9563557" class="statcounter" href="https://www.statcounter.com/" target="_blank"><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAOAQMAAABJgO2XAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAT0lEQVQImWNgwA3kbAykPx/vZ2AwTiuwZsu52QBkbKh+lnOwgcE8z+C2Qc55BgbrMsMZhscPgqQMfxgzgBkG0mY8QMVyNn8knz/vx2MBAwCA0xqkWBtIBQAAAABJRU5ErkJggg==" alt="StatCounter - Free Web Tracker and Counter" border="0" undefined=""></a></span>

<noscript><div style="display:none" class="statcounter"><a title="view StatCounter analytics from 01/24/2014" href="http://statcounter.com/p9563557/?guest=1" target="_blank">
<img class="statcounter" src="http://c.statcounter.com/9563557/0/4a72786c/0/" alt="web analytics"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
</p>
<script type="text/javascript">
document.write("<p style=\"font-size: 60%\"><a title=\"view StatCounter analytics from 01/24/2014\" href=\"http://statcounter.com/p9563557/?guest=1\">View StatCounter</a></p>");
</script><p style="font-size: 60%"><a title="view StatCounter analytics from 01/24/2014" href="http://statcounter.com/p9563557/?guest=1">View StatCounter</a></p>
</div>
</div>
</body></html>